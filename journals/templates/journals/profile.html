{% extends 'journals/base.html' %}

{% block content %}

<script type="text/javascript">
    $(document).ready(function () {

    $.ajaxSetup({data: {
    csrfmiddlewaretoken: '{{ csrf_token }}'
    }});

   $( ".follow-button" ).click(function() {
        $.post('{% url 'follow_user' %}', {'data': $(this).html(), 'user_to_follow_or_unfollow': $( "#username" ).html()})

        if ($(this).html() == "Follow")
        {
            $(this).html("Unfollow")
            $(this).removeClass("follow-button")
            $(this).addClass("unfollow-button")
        }
        else
        {
            $(this).html("Follow")
            $(this).removeClass("unfollow-button")
            $(this).addClass("follow-button")
        }

   });

   $( ".unfollow-button" ).click(function() {
        $.post('{% url 'follow_user' %}', {'data': $(this).html(), 'user_to_follow_or_unfollow': $( "#username" ).html()})

        if ($(this).html() == "Follow")
        {
            $(this).html("Unfollow")
            $(this).removeClass("follow-button")
            $(this).addClass("unfollow-button")
        }
        else
        {
            $(this).html("Follow")
            $(this).removeClass("unfollow-button")
            $(this).addClass("follow-button")
        }

   });

});
</script>

<div id="username">{{ username }}</div>
{% if user.is_authenticated and not loggedin_user_profile %}
    {% if followed_by %}
        <button type="button" class="unfollow-button">Unfollow</button>
    {% else %}
        <button type="button" class="follow-button">Follow</button>
    {% endif %}
<br>
{% endif %}

{% if loggedin_user_profile %}
    <input type="radio" name="filter" id="public_radio" value="public">Public<br>
    <input type="radio" name="filter" id="private_radio" value="private">Private<br>
    <input type="radio" name="filter" id="all_radio" value="all">All<br/>
{% endif %}
<script type="text/javascript">

$(document).ready(function () {
   $( "#private_radio" ).click(function() {
        $("#journal_container_container").empty();
        {% for journal in user_journals %}
            {% if journal.public == False %}
                $("#journal_container_container").append('<div class="journal_container"><div class="journal_date">{{ journal.date|date:"M d, Y" }}</div><a class="journal_user" id="user_profile" href="{% url 'profile' journal.user.userextension.slug %}">{{ journal.user.username }}</a><div class="journal_title"><a href="{% url 'journal_detail' journal.slug %}">{{ journal.title }}</a></div>')
            {% endif %}
        {% endfor %}
   });

   $( "#public_radio" ).click(function() {
        console.log("public radio...");
        $("#journal_container_container").empty();
        {% for journal in user_journals %}
            {% if journal.public == True %}
                $("#journal_container_container").append('<div class="journal_container"><div class="journal_date">{{ journal.date|date:"M d, Y" }}</div><a class="journal_user" id="user_profile" href="{% url 'profile' journal.user.userextension.slug %}">{{ journal.user.username }}</a><div class="journal_title"><a href="{% url 'journal_detail' journal.slug %}">{{ journal.title }}</a></div>')
            {% endif %}
        {% endfor %}
   });

   $( "#all_radio" ).click(function() {
        $("#journal_container_container").empty();
        {% for journal in user_journals %}
                $("#journal_container_container").append('<div class="journal_container"><div class="journal_date">{{ journal.date|date:"M d, Y" }}</div><a class="journal_user" id="user_profile" href="{% url 'profile' journal.user.userextension.slug %}">{{ journal.user.username }}</a><div class="journal_title"><a href="{% url 'journal_detail' journal.slug %}">{{ journal.title }}</a></div>')
        {% endfor %}
   });

});
</script>


<div id="journal_container_container">
{% for journal in user_journals%}
    <div class="journal_container">
    <div class="journal_date">{{ journal.date|date:"M d, Y" }}</div>
    <a class="journal_user" id="user_profile" href="{% url 'profile' journal.user.userextension.slug %}">{{ journal.user.username }}</a>
    <div class="journal_title"><a href="{% url 'journal_detail' journal.slug %}">{{ journal.title }}</a></div>
</div>
{% endfor %}
</div>

{% endblock %}